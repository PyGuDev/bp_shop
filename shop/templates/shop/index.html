{% extends "base/wrapper.html" %}
{% load static %}
{% block content %}
<style>
    .image_product{
        width: 100%;
        height: 100%;
        display: none;
    }
    .active_image{
        display: block!important;
    }
    .item-product{
        height: 235px;
    }
    .category {
	width              : 100px;
	height             : 26px;
	border: 0;
	-webkit-appearance : none;
	background-image   : url(" {% static 'images/icons/arrow.svg' %}");
	background-position: right center;
	background-repeat  : no-repeat;
	line-height        : 1em;
	/* for FF */
	-moz-appearance    : none;
	text-indent        : 0.01px;
	text-overflow      : '';
	/* for IE */
	-ms-appearance     : none;
}
.slider-btn button{
    border: none;
    background: none;
}
.slider-btn button:focus{
    outline: none;
}
</style>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12 col-sm-12">
            <div class="nav">
                <div class="row">
                    <div class="col-md-6">
                        <select class="category">
                            <option>Категория</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <select class="category">
                            <option>Новые</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="list-product mt-5">
                {% if object_list%}
                {% for product in object_list %}
                <div class="row item-product mt-5">
                    <div class="col-xl-4 col-md-5 col-sm-12 h-100">
                        <div class="row d-flex justify-content-center align-items-center">
                            <div class="col-2 slider-btn" onclick="back_image()"><button><img src="{% static 'images/icons/back.svg'%}" ></button></div>
                            <div class="col-8">{% for image in product.images.all %}
                                {% if forloop.first %}
                                <img class="image_product active_image" id="image_{{forloop.counter0}}" src="{{ image.url.url }}">
                                {% else %}
                                <img class="image_product" id="image_{{forloop.counter0}}" src="{{ image.url.url }}">
                                {% endif %}
                                {% endfor %}
                            </div>
                            <div class="col-2 slider-btn" onclick="next_image()"><button><img src="{% static 'images/icons/next.svg'%}" ></button></div></div>



                    </div>
                    <div class="col-md-7 col-sm-12 h-100">
                        <h4>{{ product.title }}</h4>
                        <p>{{ product.description|safe|truncatechars:200}}</p>
                        <spa>Цена: {{ product.price}} руб</spa>
                    </div>
                </div>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<script>
    function next_image(){
         var image = $('.active_image');
         var next_image = image.next();
         console.log(next_image)
         if(next_image.length > 0){
             image.removeClass('active_image');
             next_image.addClass('active_image');
         }
    }
    function back_image(){
         var image = $('.active_image');
         var back_image = image.prev();
         console.log(next_image)
         if(back_image.length > 0){
             image.removeClass('active_image');
             back_image.addClass('active_image');
         }
    }
</script>
{% endblock %}